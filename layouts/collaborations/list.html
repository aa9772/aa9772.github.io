{{ define "main" }}

<h1>Collaborations</h1>

<input id="search"
       type="text"
       placeholder="Search collaborations..."
       style="width:100%;padding:8px;margin-bottom:1rem;">

<div id="collaborations"></div>

<script>
fetch('/collaborations/index.json')
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById('collaborations');
    const search = document.getElementById('search');

    function render(items) {
      container.innerHTML = '';
      items.forEach(p => {
        container.innerHTML += `
          <a href="${p.url}" style="display:block; margin-bottom:20px; text-decoration:none; color:inherit;">
  	    <h3>${p.title}</h3>
 	    <p>${p.summary || ''}</p>
  	    <small>${(p.tags || []).join(', ')}</small>
	</a>

        `;
      });
    }

    render(data);

    search.addEventListener('input', e => {
      const q = e.target.value.toLowerCase();
      render(data.filter(p =>
        p.title.toLowerCase().includes(q) ||
        (p.summary || '').toLowerCase().includes(q)
      ));
    });
  });
</script>


{{ end }}
